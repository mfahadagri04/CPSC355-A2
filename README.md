# Mochi's Bamboo Inventory System
**CPSC 355 - Assignment 2**

## Overview
This program helps Mochi the Panda manage his bamboo inventory. It tracks shipments from different suppliers, allows searching and sorting, and generates reports for the forest council.

## How to Compile and Run
```bash
gcc mochi_supplier.c -o mochi_supplier
./mochi_supplier
```

Make sure `shipments.txt` is in the same directory as the program.

## File Format
The program reads from `shipments.txt` where each line has:
```
<bamboo_type> <quantity> <expiry_date> <supplier_id>
```

Example:
```
7 450 2025-09-28 101
3 85 2025-10-05 102
```

## Features

### 1. Read Shipments (Case 1)
Loads all shipments from `shipments.txt` into memory. The program validates each line and skips any bad data. After loading, it displays all shipments in a table.

**Function:** `readShipments()`
- Opens the file and reads line by line
- Validates bamboo type (0-9), quantity (positive), and date format
- Dynamically expands the array if needed using `realloc()`
- Returns the number of shipments loaded

### 2. Add New Shipment (Case 2)
Lets you manually add a new shipment. The program asks for bamboo type, quantity, expiry date, and supplier ID. It validates all inputs and automatically appends the new shipment to `shipments.txt`.

**Function:** `addNewShipment()`
- Gets user input with validation
- Expands the dynamic array if at capacity
- Appends to file in append mode so nothing gets overwritten

### 3. Save Shipments (Case 3)
Overwrites `shipments.txt` with whatever is currently in memory. This is useful after you've deleted or sorted shipments and want to keep those changes.

**Function:** `saveShipments()`
- Opens file in write mode (overwrites everything)
- Writes all current shipments

### 4. Remove Shipment (Case 4)
Shows all shipments with numbers next to them. You pick which one to delete by entering its number. The program shifts all remaining shipments to fill the gap.

**Function:** `removeShipment()`
- Displays numbered list of shipments
- Takes user input for which to delete
- Shifts array elements to remove the gap
- Updates the count

### 5. Search Shipments (Option 5)
Three search options:
- **By Bamboo Type:** Shows all shipments of a specific type (0-9)
- **By Supplier ID:** Shows all shipments from one supplier
- **By Date Range:** Shows shipments between two dates

**Function:** `searchShipments()`
- Uses simple loops to find matches
- Shows count of how many were found

### 6. Sort Shipments (Option 6)
Three sorting options:
- **By Quantity:** Biggest to smallest
- **By Bamboo Type:** 0 to 9
- **By Date:** Earliest to latest

**Function:** `sortShipments()`
- Uses `qsort()` from stdlib
- Has three comparison functions: `compareQuantity()`, `compareType()`, `compareDate()`
- Shows sorted results immediately

### 7. Generate Report (Option 7)
Creates `report.txt` with:
- Total quantity for each bamboo type (0-9)
- Top 3 most common types
- Percentage breakdown by supplier

**Function:** `generateReport()`
- Loops through shipments to calculate totals
- Uses arrays to track type totals and supplier contributions
- Writes formatted output to file

### 8. Exit (Option 8)
Quits the program.

## Data Structures

### Shipment Struct
```c
typedef struct {
    int bambooType;       // 0-9
    int quantity;         // positive number
    char expiry_date[11]; // YYYY-MM-DD format
    int supplierID;       // any integer
} Shipment;
```

### ShipmentManager Struct
```c
typedef struct {
    Shipment *shipments;  // pointer to dynamic array
    int count;            // how many shipments currently stored
    int capacity;         // max size before needing realloc
} ShipmentManager;
```

## Memory Management
The program uses dynamic memory allocation:
- `initManager()` - allocates initial space with `malloc()`
- `expandCapacity()` - doubles capacity when full using `realloc()`
- `freeManager()` - releases memory with `free()` before exit

## Error Handling
- Checks if file exists before reading
- Validates all user input (types, quantities, dates)
- Skips invalid lines in the input file with warnings
- Handles memory allocation failures

## Important Notes
- Changes to shipments (add/remove/sort) only affect memory until you use option 3 to save
- The program validates dates but doesn't check if they're realistic (like Feb 30)
- Supplier IDs can be any number
- Adding a shipment automatically appends to the file, but removing doesn't update the file until you save

## Files Included
- `mochi_supplier.c` - main program
- `shipments.txt` - input file with sample data
- `report.txt` - generated by option 7 (created when you run it)
- `README.md` - this file